{{ define "header" }}

<header class="title-block">
  <div class="title">
    <h1>America&rsquo;s Public Bible</h1>
  </div>
  <div class="subtitle">A Commentary <span class="author">by <a href="https://lincolnmullen.com/">Lincoln A. Mullen</a>
    </span>
  </div>
</header>

{{ end }}

{{ define "main" }}

<section>
  <div class="grid-x grid-margin-x" data-equalizer data-equalize-on="medium" id="homepage-gallery">
    {{ range where (where .Site.RegularPages "Type" "gallery") ".Params.featured" true | first 4 }}
    <div class="cell medium-3 small-4">
      <div class="callout" data-equalizer-watch>
        {{ $img := .Resources.GetMatch "quotation.png"}}
        {{ $thumbnail := $img.Fill "410x210 TopLeft" }}
        {{ $anchor := replace .Title " " "-" | lower }}
        <a href="/gallery/#{{ $anchor }}">
          <img src="{{ $thumbnail.Permalink }}" alt="Thumbnail of {{ .Title }}" />
        </a>
      </div>
    </div>
    {{ end }}
  </div>
</section>

<section>
  {{ .Content }}
</section>

<section>
  <h3>How to use this website</h3>
  {{ with .Site.GetPage "/how-to-use" }}
  {{ .Content }}
  {{ end }}
</section>

<hr>

<section>
  <h2>Essays</h2>
  <dl>
    {{ range (where .Site.RegularPages "Type" "essay").ByParam "order" }}
    <div class="dl-item">
      <dt>
        <p>
          <strong><a href="{{ .Permalink }}">{{ .Title }}</a></strong>
        </p>
      </dt>
      <dd>
        <p>
          {{ .Description | markdownify }}
        </p>
      </dd>
    </div>
    {{ end }}
  </dl>
</section>

<hr>

<section>
  <h2>Verse histories</h2>
  <dl>
    {{ range (where .Site.RegularPages "Type" "verse").ByParam "order" }}
    <div class="dl-item">
      <dt>
        <p>
          <strong><a href="{{ .Permalink }}">{{ .Title }}</a></strong>
        </p>
      </dt>
      <dd>
        <p>
          {{ .Params.Reference }}&mdash;&ldquo;{{ .Params.Snippet }}&rdquo;
        </p>
        <p>
          {{ .Description | markdownify }}
        </p>
      </dd>
    </div>
    {{ end }}
  </dl>
</section>

<hr>

<section>
  <h2>Featured verses</h2>
  <div id="featured"></div>
</section>

<hr>

<section>
  <h2>Quotations gallery</h2>
  <div class="grid-x grid-margin-x" data-equalizer data-equalize-on="medium" id="homepage-gallery">
    {{ range where (where .Site.RegularPages "Type" "gallery") ".Params.featured" nil | first 16 }}
    <div class="cell medium-3 small-4">
      <div class="callout" data-equalizer-watch>
        {{ $img := .Resources.GetMatch "quotation.png"}}
        {{ $thumbnail := $img.Fill "410x210 TopLeft" }}
        {{ $anchor := replace .Title " " "-" | lower }}
        <a href="/gallery/#{{ $anchor }}">
          <img src="{{ $thumbnail.Permalink }}" alt="Thumbnail of {{ .Title }}" />
        </a>
      </div>
    </div>
    {{ end }}
  </div>
  <p class="text-right">
    <a href="/gallery/">See more quotations in the gallery &rarr;</a>
  </p>
</section>

<hr>

<section>
  <h2>Appendix</h2>
  {{ with .Site.GetPage "/appendix" }}
  {{ .Content }}
  {{ end }}
</section>

<hr>

<section>
  <h3>Project news and changelog</h3>
  <ul id="news" class="no-bullet">
    {{ range (where .Site.RegularPages "Type" "news").ByDate.Reverse }}
    <li><time datetime='{{ .Date.Format "2006-01-02" }}'>{{ .Date.Format "2 January 2006" }}</time>.
      {{.Params.News | markdownify }}</li>
    {{ end }}
  </ul>

</section>

{{ end }}
